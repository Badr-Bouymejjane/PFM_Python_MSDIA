================================================================================
   EXPLICATION D√âTAILL√âE DU CODE : app.py
================================================================================

Ce document explique √©tape par √©tape le fonctionnement de l'application web Flask
qui sert d'interface utilisateur pour le syst√®me de recommandation de cours.

================================================================================
üìã √âTAPE 1 : IMPORTATION ET CONFIGURATION (lignes 6-33)
================================================================================

Le code commence par configurer l'environnement web :

‚Ä¢ FRAMEWORK FLASK :
  - Flask : le c≈ìur de l'application web
  - render_template : pour afficher les pages HTML (dans /templates)
  - request : pour r√©cup√©rer les donn√©es envoy√©es par l'utilisateur (formulaires)
  - session : pour garder l'utilisateur connect√© (cookies)
  - jsonify : pour renvoyer des donn√©es JSON (pour les API)

‚Ä¢ CONFIGURATION :
  Importe les param√®tres depuis config.py (cl√© secr√®te, dur√©e de session, etc.)
  et configure l'application Flask pour g√©rer les sessions de mani√®re s√©curis√©e.

‚Ä¢ INITIALISATION DES MOD√àLES :
  - recommender = CourseRecommender() : Charge le moteur de recommandation
  - user_manager = UserManager() : Charge le gestionnaire d'utilisateurs

================================================================================
üîπ √âTAPE 2 : FONCTIONS UTILITAIRES ET D√âCORATEURS (lignes 36-73)
================================================================================

Des outils pour s√©curiser et g√©rer l'application :

‚Ä¢ @login_required (lignes 36-42) :
  Un "d√©corateur" qui prot√®ge les pages. Si on l'ajoute au-dessus d'une route,
  l'utilisateur DOIT √™tre connect√© pour la voir. Sinon, il est redirig√© vers
  la page de connexion.

‚Ä¢ init_recommender() (lignes 47-73) :
  Fonction appel√©e au d√©marrage. Elle v√©rifie si le mod√®le d'IA existe :
  - OUI ‚Üí Le charge en m√©moire
  - NON ‚Üí Lance l'entra√Ænement (train) et le sauvegarde
  Cela garantit que l'app est toujours pr√™te √† faire des recommandations.

================================================================================
üîπ √âTAPE 3 : SYST√àME D'AUTHENTIFICATION (lignes 76-123)
================================================================================

G√®re l'acc√®s des utilisateurs :

‚Ä¢ /login (Connexion) :
  - GET : Affiche le formulaire
  - POST : V√©rifie pseudo/mot de passe avec user_manager. Si OK, cr√©e une
    session ('session['username'] = ...').

‚Ä¢ /register (Inscription) :
  - V√©rifie que le pseudo est unique et les mots de passe correspondent.
  - Cr√©e le compte et connecte directement l'utilisateur.

‚Ä¢ /logout (D√©connexion) :
  - Supprime l'utilisateur de la session et redirige vers login.

================================================================================
üîπ √âTAPE 4 : PAGE D'ACCUEIL INTELLIGENTE (lignes 125-266)
================================================================================

La route '/' (home) est le cerveau de l'interface. Elle construit un flux
personnalis√© pour chaque utilisateur :

1. R√âCUP√àRE LE PROFIL : Charge les pr√©f√©rences et l'historique de l'utilisateur.

2. G√âN√àRE 3 TYPES DE RECOMMANDATIONS :
   a. Bas√©es sur les recherches r√©centes (ex: "python")
   b. Bas√©es sur les cat√©gories pr√©f√©r√©es (selon les clics pr√©c√©dents)
   c. Bas√©es sur la popularit√© (pour compl√©ter ou pour les nouveaux)

3. CALCUL DU SCORE HYBRIDE (lignes 198-252) :
   L'algorithme fusionne plusieurs signaux pour trier les cours :
   - Score de similarit√© (IA)
   - Bonus si c'est une cat√©gorie favorite
   - Bonus si le cours est bien not√© (4.5+)
   - P√©nalit√© de "diversification" pour ne pas montrer toujours la m√™me chose

   R√©sultat : Une liste de cours tri√©e par pertinence unique pour cet utilisateur.

================================================================================
üîπ √âTAPE 5 : CATALOGUE DE COURS  (lignes 267-375)
================================================================================

La route '/courses' permet d'explorer tout le catalogue :

‚Ä¢ FILTRES ET RECHERCHE :
  L'utilisateur peut filtrer par plateforme (Coursera/Udemy), niveau ou cat√©gorie.
  Si une recherche est faite, elle est sauvegard√©e dans l'historique pour
  am√©liorer les futures recommandations.

‚Ä¢ LOGIQUE DE RECHERCHE PERSONNALIS√âE (lignes 290-346) :
  Si l'utilisateur trie par "Recommand√©", l'app ne fait pas juste un tri simple.
  Elle "booste" les cours qui correspondent aux int√©r√™ts pass√©s de l'utilisateur,
  m√™me dans une recherche globale.

================================================================================
üîπ √âTAPE 6 : D√âTAIL D'UN COURS & TRACKING (lignes 376-394)
================================================================================

La route '/course/<id>' affiche un cours sp√©cifique :

‚Ä¢ TRACKING :
  D√®s que la page s'ouvre, user_manager.track_view() est appel√©.
  Cela enregistre que l'utilisateur est int√©ress√© par ce sujet, ce qui
  influencera sa page d'accueil future.

‚Ä¢ RECOMMANDATIONS SIMILAIRES :
  Affiche "Vous aimerez aussi..." en bas de page, en utilisant
  recommender.recommend_similar().

================================================================================
üîπ √âTAPE 7 : ROUTES API (lignes 423-502)
================================================================================

Ces routes ne retournent pas de HTML mais du JSON. Elles sont utilis√©es par le
JavaScript pour rendre la page dynamique sans recharger :

‚Ä¢ /api/search : Recherche instantan√©e (barre de recherche)
‚Ä¢ /api/track/click : Enregistre un clic quand on va sur le site externe
‚Ä¢ /api/user/stats : Pour les graphiques du profil

================================================================================
üîπ √âTAPE 8 : CLUSTERING & DASHBOARD (lignes 504-569)
================================================================================

‚Ä¢ /clustering :
  Visualise les groupes de cours (clusters). Utilise un mod√®le de clustering
  (K-Means) pour regrouper les cours par th√©matique et afficher une carte
  interactive.

‚Ä¢ /dashboard :
  Affiche des statistiques globales sur le catalogue (r√©partition par plateforme,
  notes moyennes, etc.) sous forme de graphiques.

‚Ä¢ /api/learning-path (lignes 571-580) :
  G√©n√®re un "parcours d'apprentissage" sugg√©r√© pour une cat√©gorie donn√©e,
  en √©tape par √©tape (D√©butant -> Avanc√©).

================================================================================
üîπ √âTAPE 9 : LANCEMENT DU SERVEUR (lignes 602-609)
================================================================================

Le bloc final :
1. Initialise le syst√®me de recommandation (chargement/entra√Ænement).
2. Si tout est OK, lance le serveur web sur le port d√©fini (2400).

================================================================================
üéØ R√âSUM√â DU FLUX UTILISATEUR
================================================================================

1. CONNEXION : L'utilisateur s'identifie (/login).
2. ACCUEIL : Le syst√®me analyse son historique et construit une liste sur mesure
   (M√©lange Recherche + Int√©r√™ts + Popularit√©).
3. NAVIGATION :
   - Clic sur un cours ‚Üí Enregistr√© comme int√©r√™t fort.
   - Recherche "Java" ‚Üí Enregistr√© comme intention.
4. RAFFINEMENT : Au prochain rechargement de l'accueil, les cours de Java et
   similaires au cours cliqu√© seront mis en avant.

================================================================================
üí° POINTS CL√âS √Ä RETENIR
================================================================================

‚úì STATEFULNESS (√âtat) : Contrairement √† un site statique, cette app "apprend".
  Chaque action (clic, recherche, vue) modifie les suggestions futures gr√¢ce
  au User Manager qui stocke tout.

‚úì HYBRIDATION : L'algorithme ne se base pas sur un seul crit√®re. Il m√©lange
  le contenu (IA), la popularit√© (Note) et le contexte (Recherche r√©cente)
  pour un r√©sultat √©quilibr√©.

‚úì PERFORMANCE : Le chargement des donn√©es et l'entra√Ænement se font au
  d√©marrage (init_recommender) pour que le site soit rapide ensuite.

================================================================================
FIN DE L'EXPLICATION
================================================================================
